<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>SmartDrive</title>
    <style>
      :root {
        --bg: #050816;
        --bg-soft: #0b1020;
        --accent: #3b82f6;
        --accent-soft: rgba(59, 130, 246, 0.15);
        --accent-strong: #2563eb;
        --border-subtle: #1f2937;
        --text-main: #f9fafb;
        --text-muted: #9ca3af;
        --danger: #ef4444;
        --radius-lg: 18px;
        --radius-md: 12px;
        --radius-pill: 999px;
        --shadow-soft: 0 24px 60px rgba(15, 23, 42, 0.8);
        --shadow-elevated: 0 18px 45px rgba(15, 23, 42, 0.9);
      }

      * {
        box-sizing: border-box;
      }

      body {
        margin: 0;
        min-height: 100vh;
        font-family: system-ui, -apple-system, BlinkMacSystemFont, "SF Pro Text",
          "Segoe UI", sans-serif;
        background: radial-gradient(circle at top, #111827, #020617 55%);
        color: var(--text-main);
        display: flex;
        align-items: stretch;
        justify-content: center;
      }

      #root {
        flex: 1;
        display: flex;
      }

      .app-shell {
        margin: 16px;
        flex: 1;
        display: flex;
        flex-direction: column;
        border-radius: 24px;
        background: radial-gradient(circle at top left, #1f2937 0, #020617 55%);
        box-shadow: var(--shadow-soft);
        overflow: hidden;
      }

      .app-header {
        padding: 16px 24px 12px;
        display: flex;
        align-items: center;
        justify-content: space-between;
        border-bottom: 1px solid rgba(148, 163, 184, 0.18);
        backdrop-filter: blur(18px);
        background: linear-gradient(
          to bottom,
          rgba(15, 23, 42, 0.9),
          rgba(15, 23, 42, 0.55)
        );
      }

      .brand {
        display: flex;
        align-items: center;
        gap: 10px;
      }

      .brand-mark {
        width: 34px;
        height: 34px;
        border-radius: 14px;
        background: radial-gradient(circle at 30% 0, #4ade80, #22c55e 28%, #0f172a);
        display: flex;
        align-items: center;
        justify-content: center;
        box-shadow: 0 14px 35px rgba(34, 197, 94, 0.45);
      }

      .brand-mark span {
        font-size: 18px;
      }

      .brand-text {
        display: flex;
        flex-direction: column;
      }

      .brand-text-title {
        font-weight: 600;
        letter-spacing: 0.02em;
      }

      .brand-text-sub {
        font-size: 11px;
        text-transform: uppercase;
        letter-spacing: 0.16em;
        color: var(--text-muted);
      }

      .nav {
        display: flex;
        gap: 4px;
        padding: 3px;
        border-radius: 999px;
        background: rgba(15, 23, 42, 0.85);
        border: 1px solid rgba(148, 163, 184, 0.25);
      }

      .nav button {
        border: none;
        background: transparent;
        color: var(--text-muted);
        font-size: 13px;
        padding: 6px 14px;
        border-radius: 999px;
        cursor: pointer;
        display: flex;
        align-items: center;
        gap: 6px;
        transition: all 0.14s ease-out;
      }

      .nav button span.icon {
        font-size: 14px;
      }

      .nav button.active {
        color: var(--text-main);
        background: radial-gradient(
          circle at top left,
          rgba(59, 130, 246, 0.16),
          rgba(59, 130, 246, 0.48)
        );
        box-shadow: 0 12px 28px rgba(37, 99, 235, 0.4);
      }

      .nav button:not(.active):hover {
        color: #e5e7eb;
        background: rgba(31, 41, 55, 0.85);
      }

      .user-pill {
        display: flex;
        align-items: center;
        gap: 8px;
        padding: 5px 10px;
        border-radius: 999px;
        background: rgba(15, 23, 42, 0.9);
        border: 1px solid rgba(148, 163, 184, 0.3);
      }

      .user-avatar {
        width: 22px;
        height: 22px;
        border-radius: 999px;
        background: radial-gradient(circle at 20% 0, #3b82f6, #6366f1 40%, #111827);
        display: flex;
        align-items: center;
        justify-content: center;
        font-size: 11px;
        color: white;
      }

      .user-name {
        font-size: 12px;
        color: #e5e7eb;
        max-width: 140px;
        white-space: nowrap;
        overflow: hidden;
        text-overflow: ellipsis;
      }

      .user-pill button {
        border: none;
        background: transparent;
        color: var(--text-muted);
        font-size: 11px;
        padding: 2px 8px;
        border-radius: 999px;
        cursor: pointer;
      }

      .user-pill button:hover {
        background: rgba(239, 68, 68, 0.08);
        color: var(--danger);
      }

      .app-main {
        flex: 1;
        display: flex;
        padding: 18px 18px 18px;
      }

      .page {
        flex: 1;
        border-radius: 20px;
        border: 1px solid var(--border-subtle);
        background: radial-gradient(circle at top, #020617, #020617 50%, #000 100%);
        box-shadow: var(--shadow-elevated);
        overflow: hidden;
        display: flex;
      }

      /* LOGIN PAGE */
      .login-layout {
        display: grid;
        grid-template-columns: minmax(0, 1.15fr) minmax(0, 0.85fr);
        width: 100%;
      }

      .login-hero {
        padding: 32px 30px;
        border-right: 1px solid rgba(15, 23, 42, 0.9);
        background: radial-gradient(circle at top left, #111827, #020617 60%);
        position: relative;
        overflow: hidden;
      }

      .login-hero h1 {
        font-size: clamp(26px, 2.3vw, 32px);
        margin: 0 0 10px;
        letter-spacing: 0.02em;
      }

      .login-hero p {
        margin: 0;
        color: var(--text-muted);
        max-width: 380px;
        font-size: 14px;
      }

      .login-hero-grid {
        margin-top: 26px;
        display: grid;
        grid-template-columns: repeat(3, minmax(0, 1fr));
        gap: 10px;
      }

      .stat-card {
        padding: 10px 11px;
        border-radius: 16px;
        background: radial-gradient(circle at top left, #1f2937, #020617);
        border: 1px solid rgba(148, 163, 184, 0.25);
      }

      .stat-label {
        font-size: 11px;
        text-transform: uppercase;
        letter-spacing: 0.18em;
        color: var(--text-muted);
        margin-bottom: 4px;
      }

      .stat-value {
        font-size: 15px;
        font-weight: 600;
      }

      .stat-sub {
        margin-top: 6px;
        font-size: 11px;
        color: var(--text-muted);
      }

      .orbital {
        position: absolute;
        inset: auto -80px -110px auto;
        width: 260px;
        height: 260px;
        border-radius: 999px;
        background: radial-gradient(circle, rgba(37, 99, 235, 0.38), transparent 60%);
        filter: blur(4px);
        opacity: 0.9;
      }

      .login-panel {
        padding: 28px 26px 26px;
        background: radial-gradient(circle at top, #020617, #020617 60%, #000 100%);
        display: flex;
        flex-direction: column;
        justify-content: center;
      }

      .login-panel h2 {
        font-size: 20px;
        margin: 0 0 6px;
      }

      .login-panel p {
        margin: 0 0 24px;
        font-size: 13px;
        color: var(--text-muted);
      }

      .login-buttons {
        display: flex;
        flex-direction: column;
        gap: 10px;
        margin-bottom: 14px;
      }

      .btn-auth {
        border-radius: 999px;
        border: 1px solid rgba(148, 163, 184, 0.4);
        background: rgba(15, 23, 42, 0.95);
        color: #e5e7eb;
        padding: 9px 12px;
        font-size: 14px;
        display: flex;
        align-items: center;
        gap: 9px;
        cursor: pointer;
        justify-content: center;
        transition: all 0.15s ease-out;
      }

      .btn-auth span.icon {
        font-size: 16px;
      }

      .btn-auth:hover {
        background: rgba(31, 41, 55, 0.98);
        transform: translateY(-1px);
        box-shadow: 0 14px 32px rgba(15, 23, 42, 0.9);
      }

      .btn-auth.google {
        border-color: rgba(248, 250, 252, 0.3);
      }

      .btn-auth.apple {
        background: #020617;
      }

      .login-divider {
        display: flex;
        align-items: center;
        gap: 8px;
        margin: 12px 0 18px;
        color: var(--text-muted);
        font-size: 12px;
      }

      .login-divider span.line {
        flex: 1;
        height: 1px;
        background: radial-gradient(
          circle,
          rgba(148, 163, 184, 0.45),
          transparent
        );
      }

      .login-note {
        font-size: 11px;
        color: var(--text-muted);
        line-height: 1.5;
      }

      /* HOME PAGE */
      .home-page {
        padding: 22px 22px 20px;
        display: flex;
        flex-direction: column;
        gap: 16px;
        width: 100%;
      }

      .home-header {
        display: flex;
        flex-direction: column;
        gap: 6px;
      }

      .home-kicker {
        font-size: 11px;
        text-transform: uppercase;
        letter-spacing: 0.22em;
        color: var(--accent);
      }

      .home-title-row {
        display: flex;
        justify-content: space-between;
        align-items: flex-end;
        gap: 8px;
      }

      .home-title-row h2 {
        margin: 0;
        font-size: 20px;
      }

      .home-subtitle {
        margin: 0;
        color: var(--text-muted);
        font-size: 13px;
        max-width: 420px;
      }

      .home-grid {
        display: grid;
        grid-template-columns: minmax(0, 1.4fr) minmax(0, 1fr);
        gap: 14px;
        flex: 1;
        min-height: 0;
      }

      .card {
        border-radius: var(--radius-lg);
        border: 1px solid rgba(31, 41, 55, 0.95);
        background: radial-gradient(circle at top left, #020617, #020617 58%, #000);
        padding: 16px 16px 14px;
        display: flex;
        flex-direction: column;
        gap: 10px;
      }

      .card-header {
        display: flex;
        justify-content: space-between;
        align-items: center;
      }

      .card-title {
        font-size: 14px;
        font-weight: 600;
      }

      .badge-soft {
        border-radius: 999px;
        padding: 4px 9px;
        font-size: 11px;
        background: rgba(37, 99, 235, 0.16);
        color: #bfdbfe;
        border: 1px solid rgba(37, 99, 235, 0.5);
      }

      .card-placeholder {
        margin-top: 4px;
        flex: 1;
        border-radius: var(--radius-md);
        border: 1px dashed rgba(55, 65, 81, 0.9);
        background: repeating-linear-gradient(
            -45deg,
            rgba(15, 23, 42, 0.9),
            rgba(15, 23, 42, 0.9) 6px,
            rgba(15, 23, 42, 1) 6px,
            rgba(15, 23, 42, 1) 12px
          ),
          radial-gradient(circle at top left, #020617, #020617 60%);
        display: flex;
        align-items: center;
        justify-content: center;
        color: var(--text-muted);
        font-size: 12px;
        text-align: center;
        padding: 18px;
      }

      .card-placeholder strong {
        color: #e5e7eb;
        font-weight: 500;
      }

      .home-side-grid {
        display: flex;
        flex-direction: column;
        gap: 10px;
      }

      .chip-row {
        display: flex;
        flex-wrap: wrap;
        gap: 6px;
      }

      .chip {
        border-radius: 999px;
        padding: 3px 9px;
        border: 1px solid rgba(31, 41, 55, 0.9);
        background: rgba(15, 23, 42, 0.95);
        font-size: 11px;
        color: var(--text-muted);
      }

      /* MONITORING PAGE */
      .monitor-page {
        display: flex;
        flex-direction: column;
        width: 100%;
      }

      .monitor-top {
        flex: 1.1;
        min-height: 220px;
        position: relative;
        border-bottom: 1px solid rgba(31, 41, 55, 0.95);
        background: radial-gradient(circle at top, #020617, #020617 55%, #000);
      }

      .monitor-map {
        position: absolute;
        inset: 0;
      }

      #map {
        width: 100%;
        height: 100%;
      }

      .monitor-overlay {
        position: absolute;
        left: 16px;
        right: 16px;
        top: 14px;
        display: flex;
        flex-direction: column;
        gap: 10px;
        pointer-events: none;
      }

      .monitor-search {
        pointer-events: auto;
        border-radius: var(--radius-pill);
        border: 1px solid rgba(15, 23, 42, 0.9);
        background: rgba(15, 23, 42, 0.9);
        backdrop-filter: blur(16px);
        padding: 5px 6px 5px 10px;
        display: flex;
        align-items: center;
        gap: 8px;
        box-shadow: 0 18px 40px rgba(15, 23, 42, 0.75);
      }

      .monitor-search input {
        flex: 1;
        border: none;
        background: transparent;
        outline: none;
        color: #e5e7eb;
        font-size: 13px;
      }

      .monitor-search input::placeholder {
        color: #6b7280;
      }

      .btn-primary {
        pointer-events: auto;
        border-radius: var(--radius-pill);
        border: none;
        padding: 7px 14px;
        font-size: 12px;
        font-weight: 500;
        cursor: pointer;
        background: linear-gradient(
          to right,
          var(--accent),
          var(--accent-strong)
        );
        color: white;
        box-shadow: 0 16px 36px rgba(37, 99, 235, 0.6);
        display: flex;
        align-items: center;
        gap: 5px;
      }

      .btn-primary span.icon {
        font-size: 14px;
      }

      .monitor-chip-row {
        display: flex;
        flex-wrap: wrap;
        gap: 6px;
        pointer-events: auto;
      }

      .monitor-chip {
        font-size: 11px;
        border-radius: 999px;
        padding: 4px 9px;
        background: rgba(15, 23, 42, 0.92);
        border: 1px solid rgba(31, 41, 55, 0.95);
        color: var(--text-muted);
      }

      .monitor-bottom {
        flex: 0.9;
        min-height: 180px;
        padding: 14px 16px 16px;
        background: radial-gradient(circle at top left, #020617, #000 80%);
        display: grid;
        grid-template-columns: minmax(0, 1.2fr) minmax(0, 1fr);
        gap: 10px;
      }

      .monitor-card {
        border-radius: var(--radius-lg);
        border: 1px solid rgba(31, 41, 55, 0.95);
        background: radial-gradient(circle at top, #020617, #000 80%);
        padding: 12px 12px 10px;
        display: flex;
        flex-direction: column;
        gap: 8px;
        min-height: 0;
      }

      .monitor-card-header {
        display: flex;
        justify-content: space-between;
        align-items: baseline;
        gap: 8px;
      }

      .monitor-card-title {
        font-size: 13px;
        font-weight: 600;
      }

      .monitor-card-sub {
        font-size: 11px;
        color: var(--text-muted);
      }

      .monitor-scroll {
        margin-top: 4px;
        flex: 1;
        min-height: 0;
        border-radius: var(--radius-md);
        border: 1px dashed rgba(55, 65, 81, 0.9);
        padding: 10px 10px;
        font-size: 12px;
        color: var(--text-muted);
        overflow: auto;
      }

      .monitor-scroll strong {
        color: #e5e7eb;
        font-weight: 500;
      }

      .monitor-metrics {
        display: grid;
        grid-template-columns: repeat(3, minmax(0, 1fr));
        gap: 8px;
        margin-top: 6px;
      }

      .metric-pill {
        border-radius: var(--radius-pill);
        padding: 5px 9px;
        border: 1px solid rgba(31, 41, 55, 0.95);
        background: rgba(15, 23, 42, 0.96);
        font-size: 11px;
        display: flex;
        flex-direction: column;
        gap: 2px;
      }

      .metric-label {
        color: var(--text-muted);
      }

      .metric-value {
        color: #e5e7eb;
      }

      .pill-success {
        color: #bbf7d0;
      }

      .pill-warning {
        color: #facc15;
      }

      .pill-error {
        color: #fecaca;
      }

      .status-dot {
        display: inline-block;
        width: 7px;
        height: 7px;
        border-radius: 999px;
        margin-right: 5px;
        background: #22c55e;
        box-shadow: 0 0 0 4px rgba(34, 197, 94, 0.3);
      }

      .status-dot.offline {
        background: #f97316;
        box-shadow: 0 0 0 4px rgba(249, 115, 22, 0.28);
      }

      .error-text {
        color: #fecaca;
        font-size: 11px;
      }

      footer.app-footer {
        padding: 8px 18px 12px;
        border-top: 1px solid rgba(15, 23, 42, 0.9);
        font-size: 11px;
        color: var(--text-muted);
        display: flex;
        justify-content: space-between;
      }

      footer.app-footer span {
        opacity: 0.8;
      }

      a.inline-link {
        color: #93c5fd;
        text-decoration: none;
      }

      a.inline-link:hover {
        text-decoration: underline;
      }

      /* RESPONSIVE */
      @media (max-width: 900px) {
        .login-layout {
          grid-template-columns: minmax(0, 1fr);
        }

        .login-hero {
          display: none;
        }

        .app-main {
          padding: 12px;
        }

        .home-grid {
          grid-template-columns: minmax(0, 1fr);
        }

        .monitor-bottom {
          grid-template-columns: minmax(0, 1fr);
        }
      }

      @media (max-width: 640px) {
        .app-shell {
          margin: 8px;
        }

        .app-header {
          flex-direction: column;
          align-items: flex-start;
          gap: 10px;
        }

        .nav {
          width: 100%;
          justify-content: space-between;
        }
      }
    </style>

    <!-- React via CDN (no build tooling required) -->
    <script crossorigin src="https://unpkg.com/react@18/umd/react.development.js"></script>
    <script crossorigin src="https://unpkg.com/react-dom@18/umd/react-dom.development.js"></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>

    <!-- TODO: Replace YOUR_GOOGLE_MAPS_API_KEY with your real key -->
    <!-- The map and routing will not work until you add a valid API key and enable the Maps JavaScript API & Directions API in Google Cloud. -->
    <script
      id="google-maps-script"
      src="https://maps.googleapis.com/maps/api/js?key=YOUR_GOOGLE_MAPS_API_KEY&libraries=places&callback=initSmartDriveMap"
      async
      defer
    ></script>
  </head>
  <body>
    <div id="root"></div>

    <script type="text/babel">
      const { useState, useEffect } = React;

      // Simple global map helpers so Google Maps callback can talk to React
      window.__smartDrive = {
        map: null,
        directionsService: null,
        directionsRenderer: null,
        originLatLng: null,
        setMapStatus: null,
        setRouteMeta: null,
        setError: null,
      };

      // Called by the Google Maps script callback
      window.initSmartDriveMap = function () {
        const mapEl = document.getElementById("map");
        if (!mapEl) return;

        const centerFallback = { lat: -1.286389, lng: 36.817223 }; // Nairobi CBD as neutral default

        const map = new google.maps.Map(mapEl, {
          zoom: 14,
          center: centerFallback,
          mapTypeControl: false,
          streetViewControl: false,
          fullscreenControl: false,
          styles: [
            {
              elementType: "geometry",
              stylers: [{ color: "#0b1020" }],
            },
            {
              elementType: "labels.text.fill",
              stylers: [{ color: "#e5e7eb" }],
            },
            {
              elementType: "labels.text.stroke",
              stylers: [{ color: "#020617" }],
            },
            {
              featureType: "road",
              elementType: "geometry",
              stylers: [{ color: "#1f2937" }],
            },
            {
              featureType: "water",
              elementType: "geometry",
              stylers: [{ color: "#020617" }],
            },
          ],
        });

        const directionsService = new google.maps.DirectionsService();
        const directionsRenderer = new google.maps.DirectionsRenderer({
          map,
          suppressMarkers: false,
        });

        window.__smartDrive.map = map;
        window.__smartDrive.directionsService = directionsService;
        window.__smartDrive.directionsRenderer = directionsRenderer;

        // Try to get live user location for origin
        if (navigator.geolocation) {
          navigator.geolocation.getCurrentPosition(
            (pos) => {
              const origin = {
                lat: pos.coords.latitude,
                lng: pos.coords.longitude,
              };
              window.__smartDrive.originLatLng = origin;
              map.setCenter(origin);
              new google.maps.Marker({
                position: origin,
                map,
                title: "Your location",
              });

              if (window.__smartDrive.setMapStatus) {
                window.__smartDrive.setMapStatus({
                  hasLocation: true,
                  description: "Live GPS lock acquired.",
                });
              }
            },
            () => {
              if (window.__smartDrive.setMapStatus) {
                window.__smartDrive.setMapStatus({
                  hasLocation: false,
                  description:
                    "Using default city center. Enable location to start from your real position.",
                });
              }
            }
          );
        } else if (window.__smartDrive.setMapStatus) {
          window.__smartDrive.setMapStatus({
            hasLocation: false,
            description:
              "Geolocation not supported by this browser. Map will still work with manual origin.",
          });
        }
      };

      window.calculateSmartDriveRoute = function (destination) {
        const g = window.__smartDrive;
        if (!g.directionsService || !g.directionsRenderer || !g.map) {
          g.setError && g.setError("Map is not ready yet. Please wait a moment.");
          return;
        }

        if (!destination || !destination.trim()) {
          g.setError && g.setError("Please enter a destination to get directions.");
          return;
        }

        const origin =
          g.originLatLng ||
          new google.maps.LatLng(-1.286389, 36.817223); // Nairobi fallback again

        g.setError && g.setError(null);

        g.directionsService.route(
          {
            origin,
            destination,
            travelMode: google.maps.TravelMode.DRIVING,
            provideRouteAlternatives: false,
          },
          (result, status) => {
            if (status === google.maps.DirectionsStatus.OK) {
              g.directionsRenderer.setDirections(result);
              const leg = result.routes[0].legs[0];

              g.setRouteMeta &&
                g.setRouteMeta({
                  from: leg.start_address,
                  to: leg.end_address,
                  distance: leg.distance.text,
                  duration: leg.duration.text,
                  arrival: new Date(
                    Date.now() + (leg.duration.value || 0) * 1000
                  ).toLocaleTimeString([], {
                    hour: "2-digit",
                    minute: "2-digit",
                  }),
                });
            } else {
              g.setError &&
                g.setError(
                  "Could not fetch directions for that destination. Try a more specific place name."
                );
            }
          }
        );
      };

      function App() {
        const [page, setPage] = useState("login");
        const [user, setUser] = useState(null);

        const isAuthed = Boolean(user);

        const handleMockLogin = (provider) => {
          // NOTE:
          // This is a visual stub. To hook in real auth:
          // - For Google: integrate Google Identity Services (One Tap or button),
          //   handle credential response and call setUser with profile data.
          // - For Apple: configure "Sign in with Apple" JS and do the same.
          const demoUser = {
            name: provider === "Google" ? "Google Driver" : "Apple Driver",
            provider,
          };
          setUser(demoUser);
          setPage("home");
        };

        const handleLogout = () => {
          setUser(null);
          setPage("login");
        };

        const changePage = (next) => {
          if (!isAuthed && next !== "login") {
            return;
          }
          setPage(next);
        };

        return (
          <div className="app-shell">
            <header className="app-header">
              <div className="brand">
                <div className="brand-mark">
                  <span>üöó</span>
                </div>
                <div className="brand-text">
                  <span className="brand-text-title">SmartDrive</span>
                  <span className="brand-text-sub">
                    Fleet-grade navigation shell
                  </span>
                </div>
              </div>

              <nav className="nav">
                <button
                  className={page === "login" ? "active" : ""}
                  onClick={() => changePage("login")}
                >
                  <span className="icon">üîê</span>
                  Login
                </button>
                <button
                  className={page === "home" ? "active" : ""}
                  onClick={() => changePage("home")}
                  disabled={!isAuthed}
                >
                  <span className="icon">üè†</span>
                  Home
                </button>
                <button
                  className={page === "monitor" ? "active" : ""}
                  onClick={() => changePage("monitor")}
                  disabled={!isAuthed}
                >
                  <span className="icon">üì°</span>
                  Monitoring
                </button>
              </nav>

              {isAuthed ? (
                <div className="user-pill">
                  <div className="user-avatar">
                    {user.name
                      .split(" ")
                      .map((n) => n[0])
                      .join("")
                      .slice(0, 2)
                      .toUpperCase()}
                  </div>
                  <span className="user-name">{user.name}</span>
                  <button onClick={handleLogout}>Sign out</button>
                </div>
              ) : (
                <span
                  style={{
                    fontSize: 11,
                    color: "#9ca3af",
                    textTransform: "uppercase",
                    letterSpacing: "0.18em",
                  }}
                >
                  Not signed in
                </span>
              )}
            </header>

            <main className="app-main">
              <div className="page">
                {page === "login" && (
                  <LoginPage
                    onMockLogin={handleMockLogin}
                    isAuthed={isAuthed}
                  />
                )}
                {page === "home" && <HomePage />}
                {page === "monitor" && <MonitorPage />}
              </div>
            </main>

            <footer className="app-footer">
              <span>
                This UI is only a shell. Plug in your own content and data
                sources.
              </span>
              <span>
                Map & directions powered by{" "}
                <a
                  href="https://developers.google.com/maps/documentation/javascript"
                  target="_blank"
                  rel="noreferrer"
                  className="inline-link"
                >
                  Google Maps JavaScript API
                </a>
                .
              </span>
            </footer>
          </div>
        );
      }

      function LoginPage({ onMockLogin, isAuthed }) {
        return (
          <section className="login-layout">
            <div className="login-hero">
              <h1>Secure, driver-friendly access to your fleet.</h1>
              <p>
                Use your Google or Apple identity to access navigation, live
                tracking, and operations tools in a single pane.
              </p>

              <div className="login-hero-grid">
                <div className="stat-card">
                  <div className="stat-label">Live trips</div>
                  <div className="stat-value">--</div>
                  <div className="stat-sub">
                    This is placeholder content. Replace with your own live
                    metrics.
                  </div>
                </div>
                <div className="stat-card">
                  <div className="stat-label">On-time rate</div>
                  <div className="stat-value">--%</div>
                  <div className="stat-sub">
                    Insert any overview data or status widgets you want here.
                  </div>
                </div>
                <div className="stat-card">
                  <div className="stat-label">Regions</div>
                  <div className="stat-value">--</div>
                  <div className="stat-sub">
                    Completely yours. Treat this left side as a hero canvas.
                  </div>
                </div>
              </div>

              <div className="orbital" />
            </div>

            <div className="login-panel">
              <h2>Sign in to SmartDrive</h2>
              <p>
                Choose one of the single-sign-on options below. You will wire
                these buttons to your real auth flows.
              </p>

              <div className="login-buttons">
                <button
                  type="button"
                  className="btn-auth google"
                  onClick={() => onMockLogin("Google")}
                >
                  <span className="icon">üü¢</span>
                  <span>Continue with Google</span>
                </button>
                <button
                  type="button"
                  className="btn-auth apple"
                  onClick={() => onMockLogin("Apple")}
                >
                  <span className="icon">Ô£ø</span>
                  <span>Continue with Apple</span>
                </button>
              </div>

              <div className="login-divider">
                <span className="line" />
                <span>How this works</span>
                <span className="line" />
              </div>

              <p className="login-note">
                <strong>Important:</strong> this starter uses{" "}
                <strong>placeholder buttons only</strong>. To go live:
                <br />
                - For Google, integrate{" "}
                <a
                  href="https://developers.google.com/identity/gsi/web"
                  target="_blank"
                  rel="noreferrer"
                  className="inline-link"
                >
                  Google Identity Services
                </a>
                .
                <br />- For Apple, integrate{" "}
                <a
                  href="https://developer.apple.com/documentation/sign_in_with_apple"
                  target="_blank"
                  rel="noreferrer"
                  className="inline-link"
                >
                  Sign in with Apple JS
                </a>
                .
              </p>
              {isAuthed && (
                <p className="login-note" style={{ marginTop: 10 }}>
                  You&apos;re already signed in ‚Äî use the navigation at the top
                  to move to Home or Monitoring.
                </p>
              )}
            </div>
          </section>
        );
      }

      function HomePage() {
        return (
          <section className="home-page">
            <div className="home-header">
              <span className="home-kicker">Home overview</span>
              <div className="home-title-row">
                <div>
                  <h2>Your customizable control room</h2>
                  <p className="home-subtitle">
                    These cards are intentionally empty. Treat them as ready-made
                    containers for whatever business content you want to show.
                  </p>
                </div>
              </div>
            </div>

            <div className="home-grid">
              <div className="card">
                <div className="card-header">
                  <span className="card-title">Primary content canvas</span>
                  <span className="badge-soft">You control this</span>
                </div>
                <div className="card-placeholder">
                  <span>
                    Drop your <strong>dashboards, charts, or content blocks</strong> here.
                    This surface is sized for your main home view.
                  </span>
                </div>
              </div>

              <div className="home-side-grid">
                <div className="card">
                  <div className="card-header">
                    <span className="card-title">Secondary content</span>
                  </div>
                  <div className="card-placeholder">
                    <span>
                      Perfect for <strong>side panels</strong>, quick stats, or
                      supporting widgets.
                    </span>
                  </div>
                </div>

                <div className="card">
                  <div className="card-header">
                    <span className="card-title">Quick ideas</span>
                  </div>
                  <div>
                    <p style={{ fontSize: 12, color: "#9ca3af", marginTop: 2 }}>
                      Some inspiration for what you might put on this page:
                    </p>
                    <div className="chip-row">
                      <span className="chip">Live vehicle list</span>
                      <span className="chip">Trip history</span>
                      <span className="chip">Driver leaderboard</span>
                      <span className="chip">Revenue metrics</span>
                      <span className="chip">Alerts &amp; incidents</span>
                      <span className="chip">Maintenance due</span>
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </section>
        );
      }

      function MonitorPage() {
        const [destination, setDestination] = useState("");
        const [mapStatus, setMapStatus] = useState(null);
        const [routeMeta, setRouteMeta] = useState(null);
        const [error, setError] = useState(null);

        useEffect(() => {
          window.__smartDrive.setMapStatus = setMapStatus;
          window.__smartDrive.setRouteMeta = setRouteMeta;
          window.__smartDrive.setError = setError;

          if (
            window.google &&
            window.google.maps &&
            !window.__smartDrive.map
          ) {
            window.initSmartDriveMap();
          }

          return () => {
            window.__smartDrive.setMapStatus = null;
            window.__smartDrive.setRouteMeta = null;
            window.__smartDrive.setError = null;
          };
        }, []);

        const handleSubmit = (e) => {
          e.preventDefault();
          window.calculateSmartDriveRoute(destination);
        };

        return (
          <section className="monitor-page">
            <div className="monitor-top">
              <div className="monitor-map">
                <div id="map" />
              </div>

              <div className="monitor-overlay">
                <form className="monitor-search" onSubmit={handleSubmit}>
                  <span className="icon" style={{ fontSize: 16 }}>
                    üîç
                  </span>
                  <input
                    type="text"
                    placeholder="Enter destination (e.g. Jomo Kenyatta Intl Airport, Nairobi Hospital, CBD)..."
                    value={destination}
                    onChange={(e) => setDestination(e.target.value)}
                  />
                  <button type="submit" className="btn-primary">
                    <span className="icon">‚û°Ô∏è</span>
                    <span>Get directions</span>
                  </button>
                </form>

                <div className="monitor-chip-row">
                  <span className="monitor-chip">
                    <span
                      className={
                        mapStatus && mapStatus.hasLocation
                          ? "status-dot"
                          : "status-dot offline"
                      }
                    />
                    GPS status:{" "}
                    {mapStatus
                      ? mapStatus.hasLocation
                        ? "Live location"
                        : "Approximate center"
                      : "Initializing"}
                  </span>
                  {routeMeta && (
                    <span className="monitor-chip">
                      Route: {routeMeta.distance} ‚Ä¢ ~{routeMeta.duration}
                    </span>
                  )}
                </div>
              </div>
            </div>

            <div className="monitor-bottom">
              <div className="monitor-card">
                <div className="monitor-card-header">
                  <span className="monitor-card-title">
                    Directions &amp; trip summary
                  </span>
                  <span className="monitor-card-sub">
                    This entire area is yours to customize.
                  </span>
                </div>
                <div className="monitor-scroll">
                  {error && <div className="error-text">{error}</div>}
                  {routeMeta ? (
                    <div style={{ lineHeight: 1.7 }}>
                      <p>
                        <strong>From:</strong> {routeMeta.from}
                      </p>
                      <p>
                        <strong>To:</strong> {routeMeta.to}
                      </p>
                      <p>
                        <strong>ETA:</strong> ~{routeMeta.duration} ‚Ä¢{" "}
                        <strong>Distance:</strong> {routeMeta.distance}
                      </p>
                      <p>
                        <strong>Estimated arrival:</strong> {routeMeta.arrival}
                      </p>
                      <p style={{ marginTop: 10 }}>
                        You can replace this block with a{" "}
                        <strong>trip timeline</strong>, stop list, pricing, or
                        any monitoring data you need to show alongside the map.
                      </p>
                    </div>
                  ) : (
                    <p>
                      No route selected yet. Enter a destination above and
                      we&apos;ll display a{" "}
                      <strong>Google Maps driving route</strong> and a summary
                      here.
                    </p>
                  )}
                </div>
              </div>

              <div className="monitor-card">
                <div className="monitor-card-header">
                  <span className="monitor-card-title">
                    Your lower panel canvas
                  </span>
                </div>
                <div className="monitor-scroll">
                  <p>
                    This is exactly the <strong>bottom layer</strong> you asked
                    for. The map lives on top, and this pane is fully separate
                    for anything else you want to display.
                  </p>
                  <p>
                    Ideas for what to place here:
                    <br />- Live vehicle diagnostics
                    <br />- Trip events (pickups, dropoffs, incidents)
                    <br />- Chat with driver / dispatch
                    <br />- Pricing &amp; billing details
                  </p>
                  <p>
                    You can also remove this text and embed{" "}
                    <strong>iframes, React components, tables, or custom
                    charts</strong> ‚Äì it&apos;s just a container.
                  </p>
                </div>
              </div>
            </div>
          </section>
        );
      }

      const root = ReactDOM.createRoot(document.getElementById("root"));
      root.render(<App />);
    </script>
  </body>
</html>

